# 始めに
これは高スペックなPC、または低品質な画質にする必要性があります。ご了承ください。  
この記事ではOBSでFPSを60fps以上、1000fpsまでも目指せる収録が出来るよう、解説していきます。
OBSについては、別途「[OBSの使い方](OBSの使い方.md)」で解説を行っていますので、ぜひそちらをご覧ください。

# 収録FPSを上げる意味
そもそも、モニターなどが出せるHz(ヘルツ)値は360fps以上などあまり見ません。どうして上げるのでしょうか。  
それは、モニターのHzを超えたFPSを残像として全フレームを表示する「モーションブラー」という技術を使った、視覚効果を作り上げるためのものです。これがあるとブレが発生します。その代わり、カクついて見えていた部分を残像として写すことにより、動きが追える、臨場感を得られる、映像に派手な演出をつけることが出来る、等の利点が得られます。

# FPSを上げるには
まず、設定を行う必要があります。
## FPSを上げる
設定 > 映像 にFPSの値を変更する場所が存在します。
そこには「FPS 共通値」「FPS 整数値」「FPS 分数値」の３つの項目があります。今回はその中の「FPS 分数値」を使用していきます。

次に、FPSを任意の値にします。通常この記事で利用する場合、240FPS以上や360FPS以上となるでしょう。  
設定を追えたら完了です。まずは収録を始めてみましょう。30秒ほど、テストで収録してみてください。  
すると、収録した映像がかくついていることがあります。それは、PCのスペックが不足していることが原因と考えられます。

## スペックに配慮する
PCへの負荷を軽減する方法は様々です。次々と解説していきます。
### 起動中のアプリケーションの状況を確認する。  
まずはここからです。タスクマネージャー(Windows)またはアクティビティモニタ(macOS)を利用し確認を行ってください。  
CPU使用率やGPU使用率がOBS未使用時に0%または5%以下である場合、この問題は解決しています。もし5%以上の場合、何かしらのアプリが利用しています。ゲームを起動している場合、それが重要である場合を除き終了することをお勧めします。
### OBS内エンコード設定
OBSには様々なエンコード設定があります。その中でも様々な軽量化方法があるため、紹介していきます。
その前に、設定>出力 から「出力モード」が詳細になっていることを確認してください。
- 映像エンコーダをGPUエンコードにする  

GPUエンコードにすることで、負荷が軽減し、かつ軽量化も期待されます。高画質を想定している場合、この設定はスキップすることをおすすめします。その場合、x264にエンコーダを変更することをお勧めします。
GPUエンコードやCPUエンコードなどがありますそれらの名称はそれぞれ「ハードウェアエンコード(GPU)」「ソフトウェアエンコード(CPU)」と呼びます。画質よりFPSを優先する場合、ハードウェアエンコードにすることをお勧めします。  
選ぶべき設定は「x264」というソフトウェアエンコード以外であれば基本問題ありません。僕の環境では「NVIDIA NVENC H.264」「QuickSync H.264」の主に２つがありますが、前者のエンコーダがより高速です。ですが、電力の使用率が上がるため、覚悟はしておいてください。元々そちらを利用していた場合には、気にせず続行してかまいません。

- レート制御

レート制御とは、ビットレートの高さを調節するためのものです。OBSには様々な制御方法があります。参照元: [OBS Studioエンコーダ詳細解説](http://mtkdt.blog.fc2.com/blog-entry-43.html#:~:text=NVIDIA%E3%81%AE%E3%82%B0%E3%83%A9%E3%83%95%E3%82%A3%E3%83%83%E3%82%AF%E3%83%9C%E3%83%BC%E3%83%89%E3%81%AB%E6%90%AD%E8%BC%89%E3%81%95%E3%82%8C%E3%81%9F%E3%83%8F%E3%83%BC%E3%83%89%E3%82%A6%E3%82%A7%E3%82%A2%E3%82%A8%E3%83%B3%E3%82%B3%E3%83%BC%E3%83%80%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%86%E3%81%93%E3%81%A8%E3%81%A7%E3%80%81%20%E3%81%BB%E3%81%BC%E7%84%A1%E8%B2%A0%E8%8D%B7%20%E3%81%A7%E9%8C%B2%E7%94%BB%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%81%8C%E5%87%BA%E6%9D%A5%E3%82%8B%E3%80%82,%E4%BD%BF%E3%81%88%E3%82%8B%E3%83%AC%E3%83%BC%E3%83%88%E5%88%B6%E5%BE%A1%E3%81%AF%EF%BC%88GTX970%EF%BC%89%E3%81%A7CBR%E3%80%81VBR%E3%80%81CQP%E3%80%81%E7%84%A1%E6%90%8D%E5%A4%B1%E3%80%82%20CBR%E3%81%AF%E7%94%BB%E8%B3%AA%E3%81%8C%E6%82%AA%E3%81%84%E3%81%AE%E3%81%A7%E8%AB%96%E5%A4%96%E3%80%81VBR%E3%82%82%E5%BE%AE%E5%A6%99%E3%81%AA%E6%84%9F%E3%81%98%E3%80%82%20CQP%E3%81%AF%E5%9C%A7%E7%B8%AE%E7%8E%87%E4%BD%8E%E3%82%81%E3%81%A0%E3%81%91%E3%81%A9%E7%94%BB%E8%B3%AA%E3%81%AF%E8%89%AF%E3%81%84%E3%80%81%E5%80%A4%E3%82%92%E4%BD%8E%E3%82%81%E3%81%AB%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%A6%E9%AB%98%E7%94%BB%E8%B3%AA%E3%81%A7%E9%8C%B2%E7%94%BB%E3%81%97%E3%81%9F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%82%A8%E3%83%B3%E3%82%B3%E3%83%BC%E3%83%89%E3%81%97%E3%81%A6%E9%AB%98%E5%9C%A7%E7%B8%AE%E3%81%AB%E3%81%99%E3%82%8B%EF%BC%88%E4%BA%8C%E6%AC%A1%E3%82%A8%E3%83%B3%E3%82%B3%E3%83%BC%E3%83%89%EF%BC%89%E3%81%A8%E3%81%8B%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9%E3%81%AA%E3%82%89%E5%8D%81%E5%88%86%E5%AE%9F%E7%94%A8%E7%9A%84%E3%80%82)
- CBR　固定ビットレート方式(値が高いほど高画質)  
メリット:ビットレートを高めの値に設定しておくことで高画質の動画を撮影出来ることと、再生負荷が軽いこと。それと編集ソフトでの音ズレが比較的起きづらい。  
デメリット:常に同じビットレートを消費し続けるので動きの少ないシーンでは無駄に容量を消費する。

- ABR　平均ビットレート方式(値が高いほど高画質)  
メリット: 後述するVBRとCBRのいいとこ取りをしたような仕様で、設定したビットレートになるように動きの多いシーンではビットレートを高めにして画質を維持し、動きの少ないシーンではその分ビットレートを抑えるという感じに、ビットレートを可変させるので圧縮効率がCBRより良い。  
デメリット: 平均値からのビットレートの変動幅には限界があるのでビットレートの可変が映像に追いつかずに画質が悪くなることがある

- VBR　可変ビットレート(値が高いほど高画質)  
メリット: ビットレートを可変させるので圧縮効率が良い、各フレームに対してビットレートの上限設定までビットレートを割り振れるので画質の劣化が少ない。  
デメリット: 映像の情報量が最大ビットレートの設定値より多いと画質が悪くなる。再生負荷は重め

- CRF　品質基準ビットレート(値が低いほど高画質)  
メリット: 各フレームを一定の画質にするように処理するので画質が良い、動きの少ないシーンはビットレートを絞り圧縮率を高め動きが激しいシーンではビットレートを多めに割り振って画質をキープする。  
デメリット: 再生負荷は重め

- CQP　固定量子化量(基本的な挙動はCRF？)  
メリット: 十分高い値にして、多めにビットレートを割り振れば高画質。ハードウェアエンコーダーが使える事がある。  
デメリット: 同容量なら、CRFより画質が悪くなる傾向にある、圧縮効率が悪い

上記を元に考えてみると、デコードで最も高速なものはCBRです。そして、最も品質が高いものはCRF、僕がおすすめするレート制御はこの２つです。ですが、CRFはOBSには存在せずCQPはCRFに劣るため、結果的にCBRを選ぶことが無難と思われます。

CBRは配信にも最適です。録画目的ではCQPを推奨されることがありますが、CBRで必要以上のビットレートで録画した後に再圧縮したほうが品質が保たれる場合もあるため、容量に余裕がある、時間が豊富にある方には1番最適な設定です。CQPは容量が厳しい、再圧縮することに抵抗感がある方、編集ソフトで利用しない方に向けておすすめです。CQPではビットレートが可変となるため、処理速度に影響する可能性があります。


